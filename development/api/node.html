

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Node API &mdash; Digital Rebar Docs</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/digitalrebar.ico"/>
    <link rel="top" title="Digital Rebar Docs" href="../../README.html" />
    <link rel="up" title="Digital Rebar API" href="README.html" />
    <link rel="next" title="Node Role APIs" href="node_role.html" />
    <link rel="prev" title="Network API" href="network.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="node_role.html" title="Node Role APIs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="network.html" title="Network API"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../README.html">DRebar</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../README.html" >Development Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="README.html" accesskey="U">Digital Rebar API</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../README.html">
              <img class="logo" src="../../_static/digital_rebar_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../README.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Node API</a><ul>
<li><a class="reference internal" href="#api-actions">API Actions</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#field-information">Field Information</a><ul>
<li><a class="reference internal" href="#minimum-fields-needed-for-create">Minimum fields needed for create</a></li>
<li><a class="reference internal" href="#target-role-id">Target Role ID</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="network.html"
                        title="previous chapter">Network API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="node_role.html"
                        title="next chapter">Node Role APIs</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/development/api/node.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="node-api">
<h1>Node API<a class="headerlink" href="#node-api" title="Permalink to this headline">¶</a></h1>
<p>Node APIs are used to manage nodes (servers) within the Rebar system</p>
<p>When Nodes are created, updated or deleted, roles and jigs are notified
so they can tail appropriate actions.</p>
<div class="section" id="api-actions">
<h2>API Actions<a class="headerlink" href="#api-actions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="35%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Verb</th>
<th class="head">URL</th>
<th class="head">Comments</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GET</td>
<td>api/v2/nodes</td>
<td>List</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>api/v2/nodes/:id</td>
<td>Specific Item</td>
</tr>
<tr class="row-even"><td>PUT</td>
<td>api/v2/nodes/:id</td>
<td>Update Item, notifies all jigs and roles</td>
</tr>
<tr class="row-odd"><td>POST</td>
<td>api/v2/nodes</td>
<td>Create Item, notifies all jigs and roles</td>
</tr>
<tr class="row-even"><td>DELETE</td>
<td>api/v2/nodes/:id</td>
<td>Delete Item + notifies all jigs and roles</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>api/v2/nodes/:id/node_roles</td>
<td>Shows all the roles that the node is using (including their status)</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/api/v2/nodes/[:node_id]/attribs</td>
<td>List Attribs for a specific node</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/api/v2/nodes/[:node_id]/attribs/[:id]</td>
<td>Show Attrib (including value) for a specific Node</td>
</tr>
<tr class="row-even"><td>PUT</td>
<td>/api/v2/nodes/[:node_id]/commit</td>
<td>Commit all the noderoles in proposed on a specific node</td>
</tr>
<tr class="row-odd"><td>PUT</td>
<td>/api/v2/nodes/[:node_id]/attribs/[:id]</td>
<td>Update Attrib</td>
</tr>
</tbody>
</table>
<p>Details:</p>
<ul class="simple">
<li>name - must be FQDN</li>
</ul>
<p>Hints:</p>
<p>Uesrs can provide shortcuts to the hint data. The following hints have
been defined as optional parameters for the Node API</p>
<ul class="simple">
<li>ip - requests a specific network-admin IP</li>
<li>mac - setup up the DHCP resolution for the node using the given MAC
address</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Using CURL to create a minimally configured node from the Admin node</p>
<p>curl &#8211;digest -u &#8216;developer:Cr0wbar!&#8217; -H &#8220;Content-Type:application/json&#8221;
&#8211;url http://127.0.0.1:3000/api/v2/nodes -X POST &#8211;data &#64;ns.json</p>
<p>Where the data file is <code class="docutils literal"><span class="pre">ns.json</span></code> and contains</p>
<p>{ &#8220;alive&#8221;: &#8220;true&#8221;, &#8220;bootenv&#8221;: &#8220;local&#8221;, &#8220;name&#8221;: &#8220;test.cr0wbar.com&#8221; } ##
JSON Fields</p>
</div>
<div class="section" id="field-information">
<h2>Field Information<a class="headerlink" href="#field-information" title="Permalink to this headline">¶</a></h2>
<div class="section" id="minimum-fields-needed-for-create">
<h3>Minimum fields needed for create<a class="headerlink" href="#minimum-fields-needed-for-create" title="Permalink to this headline">¶</a></h3>
<p>Alive, Bootenv, Name</p>
</div>
<div class="section" id="target-role-id">
<h3>Target Role ID<a class="headerlink" href="#target-role-id" title="Permalink to this headline">¶</a></h3>
<p>TargetRole is used to troubleshoot problem nodes by putting them into a
<em>hopefully</em> known working state which allows you to put the node back
into sledgehammer so you can take the installed OS out of the picture.
To do this, set the target role to TargetRole to &#8220;rebar managed node&#8221;
and BootEnv to &#8220;sledgehammer&#8221; then reboot.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="node_role.html" title="Node Role APIs"
             >next</a> |</li>
        <li class="right" >
          <a href="network.html" title="Network API"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../README.html">DRebar</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../README.html" >Development Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="README.html" >Digital Rebar API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, RackN team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>