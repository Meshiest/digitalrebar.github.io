

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Node Role APIs &mdash; Digital Rebar Docs</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/digitalrebar.ico"/>
    <link rel="top" title="Digital Rebar Docs" href="../../README.html" />
    <link rel="up" title="Digital Rebar API" href="README.html" />
    <link rel="next" title="Provider APIs" href="provider.html" />
    <link rel="prev" title="Node API" href="node.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="provider.html" title="Provider APIs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="node.html" title="Node API"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../README.html">DRebar</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../README.html" >Development Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="README.html" accesskey="U">Digital Rebar API</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../README.html">
              <img class="logo" src="../../_static/digital_rebar_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../README.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Node Role APIs</a><ul>
<li><a class="reference internal" href="#api-actions">API Actions</a><ul>
<li><a class="reference internal" href="#json-fields">JSON fields</a></li>
<li><a class="reference internal" href="#field-notes">Field Notes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#node-error">Node_Error</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="node.html"
                        title="previous chapter">Node API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="provider.html"
                        title="next chapter">Provider APIs</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/development/api/node_role.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="node-role-apis">
<h1>Node Role APIs<a class="headerlink" href="#node-role-apis" title="Permalink to this headline">¶</a></h1>
<p>Node Roles are the core of Digital Rebar deployment and orchestration
engine</p>
<p>There are four types of data that Digital Rebar tracks while three
are maintained on related NodeRoleDatum mode.</p>
<ol class="arabic simple">
<li>user data (node_role.data) is set by users during the proposed state
(also known as &#8220;out bound data&#8221;)</li>
<li>system data (node_role.sysdata) is set by rebar before annealing
(also known as &#8220;out bound data&#8221;)</li>
<li>wall data (node_role.wall) is set by the jig after transistion (also
known as &#8220;in bound data&#8221;)</li>
<li>discovery data (node.wall) is stored on the node instead of in node role
because it reflects node information aggregated from all the jigs.
This information is available using the node.attrib_[name] and
Attrib model. Please see the node API docs for more about this type
of data</li>
</ol>
<p>NodeRole does not have a natural key, so you must reference them them by
ID or under the relevant Nodes, Roles, or Deployment.</p>
<div class="section" id="api-actions">
<h2>API Actions<a class="headerlink" href="#api-actions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="44%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Verb</th>
<th class="head">URL</th>
<th class="head">Comments</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GET</td>
<td>api/v2/node_roles</td>
<td>List</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>api/v2/node_roles/:id</td>
<td>Specific Item</td>
</tr>
<tr class="row-even"><td>PUT</td>
<td>api/v2/node_roles/:id</td>
<td>Update Item</td>
</tr>
<tr class="row-odd"><td>PUT</td>
<td>api/v2/node_roles/:id/retry</td>
<td>Retry (sets state back to TODO)</td>
</tr>
<tr class="row-even"><td>PUT</td>
<td>api/v2/node_roles/:id/propose</td>
<td>Propose (sets state to PROPOSED)</td>
</tr>
<tr class="row-odd"><td>PUT</td>
<td>api/v2/node_roles/:id/commit</td>
<td>Commit (sets state to COMMIT)</td>
</tr>
<tr class="row-even"><td>POST</td>
<td>api/v2/node_roles</td>
<td>Create Item</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/api/v2/node_roles/[:node_role_id]/parents</td>
<td>List Parent Node Roles (READ ONLY)</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/api/v2/node_roles/[:node_role_id]/children</td>
<td>List Child Node Roles (READ ONLY)</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/api/v2/node_roles/[:node_role_id]/attribs</td>
<td>List Attribs for a specific node_role</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/api/v2/node_roles/[:node_role_id]/attribs/[:id]</td>
<td>Show Attrib (including value) for a specific Node_Role</td>
</tr>
<tr class="row-odd"><td>PUT</td>
<td>/api/v2/node_roles/[:node_role_id]/attribs/[:id]</td>
<td>Update Attrib</td>
</tr>
<tr class="row-even"><td>DELETE</td>
<td>api/v2/node_roles/:id</td>
<td>Allowed if Node Role does not have child dependencies</td>
</tr>
</tbody>
</table>
<p>Helpers have been added to NodeRole create so that you do not need to
provide IDs when creating a new NodeRole. You can pass:</p>
<ul class="simple">
<li>Deployment Name instead of Deployment ID</li>
<li>Node Name instead of Node ID</li>
<li>Role Name instead of Role ID</li>
</ul>
<div class="section" id="json-fields">
<h3>JSON fields<a class="headerlink" href="#json-fields" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="23%" />
<col width="17%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Type</th>
<th class="head">Settable</th>
<th class="head">Note</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Available</td>
<td>Boolean</td>
<td>Yes</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Cohort</td>
<td>Integer</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Created_at</td>
<td>String</td>
<td>No</td>
<td>Unicode - date format</td>
</tr>
<tr class="row-odd"><td>Updated_at</td>
<td>String</td>
<td>No</td>
<td>Unicode - date format</td>
</tr>
<tr class="row-even"><td>Runlog</td>
<td>String</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Order</td>
<td>Integer</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>State</td>
<td>Integer</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Node_Error</td>
<td>Boolean</td>
<td>No</td>
<td>Calculated</td>
</tr>
<tr class="row-even"><td>Node_Id</td>
<td>Integer</td>
<td>Yes</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Status</td>
<td>??</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Run_count</td>
<td>Integer</td>
<td>No</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Deployment_Id</td>
<td>Integer</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Role_Id</td>
<td>Integer</td>
<td>Yes</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Id</td>
<td>Internal Ref</td>
<td>??</td>
<td>Actually an Int</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="field-notes">
<h3>Field Notes<a class="headerlink" href="#field-notes" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="section" id="node-error">
<h1>Node_Error<a class="headerlink" href="#node-error" title="Permalink to this headline">¶</a></h1>
<p><em>Calculated</em></p>
<p>True if any of the NodeRoles on the associated Node are in an error
state. This allows API users to monitor the status of a target role and
know if there was an error that will block progress without having to
inspect other NodeRoles. Instead of looking at all parents (which could
span nodes), Node provides a more limited scope</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="provider.html" title="Provider APIs"
             >next</a> |</li>
        <li class="right" >
          <a href="node.html" title="Node API"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../README.html">DRebar</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../README.html" >Development Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="README.html" >Digital Rebar API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, RackN team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>